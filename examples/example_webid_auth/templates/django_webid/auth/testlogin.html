{% extends "base.html" %}
{% block header %}
<h1>Congrats!</h1>
{% endblock %}
{% block content %}
<div class="notecard">
{% if not user.is_anonymous %}
<p>Congrats! You are logged in as user <b>{{ user.username }}</b></p>
{% else %}
<p>Hmmm... WebID auth failed :(</p>
{% endif %}
<p><b>request webidinfo</b>: {{ webidinfo.validatedURI }}</p>
</div>
<style>
pre {
   display: block;
   margin: 2em 0;
   white-space: pre;
   overflow: auto;
   width: 470px;
   line-height: 1.4;
   border: 1px solid #ccc;
   background: #ece9d8;
   padding: 8px;
}

.passed {
   color: green;
}

.failed {
   color: red;
}

.warning {
   color: purple;
   font-weight:bold;
}

.req {
   font-size:120%;
}

.case {
   padding-left:50px;
}

.notecard {
   color:white;
   background-color:gray;
   margin: 2px;
   padding: 10px;
   border-radius: 5px;
   border: solid 2px black;
}

</style>
<br/>
<h1>WebID login report</h1>
<p>(And see here for a machine-readable <a href="/test/WebIDTest">earl report</a>).</p>

{% for test in webidinfo.testbed.tests %}
{% for result in test.results %}

<div><b class="{% if test.requirement %}req{% else %}case{% endif %}">{{ test.name }}</b> ... <b class="{% if result.passed %}passed{% else %}failed{% endif %}">{% if result.passed %}Passed{% else %}Failed{% endif %}</b>
	{% if result.details %}<p {% if not test.requirement %}class="case"{% endif %}>verification timestamp: {{ result.details }}</p>{% endif %}
	<p {% if not test.requirement %}class="case"{% endif %}>{% if not test.mandatory and not result.passed %}<span class="warning">WARNING </span>{% endif %}{{ test.description }}</p>
</div>

{% endfor %}
{% endfor %}
{% endblock %}
